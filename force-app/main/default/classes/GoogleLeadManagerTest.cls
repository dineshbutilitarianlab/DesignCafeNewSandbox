@isTest
global class GoogleLeadManagerTest {
    @isTest
    public static void GoogleLeadManager(){
        DCWebengage__c  cuset2= new DCWebengage__c();
        cuset2.Name = 'Dcwebengage';
        cuset2.BearerToken__c = '097a1996-03d2-4870-8bbc-339eb9e239b7';
        cuset2.url__c= 'https://api.webengage.com/v1/accounts/aa131ca9/users';
        insert cuset2; 
        
        SRR__c SRRmum = new SRR__c();
        SRRmum.Name = 'Mumbai';
        SRRmum.index__c = 0;
        insert SRRmum;
        SRR__c SRRWDC = new SRR__c();
        SRRWDC.Name = 'WDC';
        SRRWDC.index__c = 0;
        insert SRRWDC;
        SRR__c SRRHyd = new SRR__c();
        SRRHyd.Name = 'Hyderabad';
        SRRHyd.index__c = 0;
        insert SRRHyd;
        SRR__c SRRMGDC = new SRR__c();
        SRRMGDC.Name = 'MGDC';
        SRRMGDC.index__c = 0;
        insert SRRMGDC;
        SRR__c SRRHSR = new SRR__c();
        SRRHSR.Name = 'HSR';
        SRRHSR.index__c = 0;
        insert SRRHSR;
        SRR__c SRRCHE = new SRR__c();
        SRRCHE.Name = 'Chennai';
        SRRCHE.index__c = 0;
        insert SRRCHE;
        SRR__c SRRjpdc = new SRR__c();
        SRRjpdc.Name = 'JPDC';
        SRRjpdc.index__c = 0;
        insert SRRjpdc;
        SRR__c SRRthane = new SRR__c();
        SRRthane.Name = 'Thane DC';
        SRRthane.index__c = 0;
        insert SRRthane; 
        
        SRR__c SRRMysore = new SRR__c();
        SRRMysore.Name = 'KDRMYS';
        SRRMysore.index__c = 0;
        insert SRRMysore;    
        SRR__c SRRPune = new SRR__c();
        SRRPune.Name = 'YERPUN';
        SRRPune.index__c = 0;
		insert SRRPune;
        SRR__c SRRBHHyd = new SRR__c();
        SRRBHHyd.Name = 'BHHYD';
        SRRBHHyd.index__c = 0;
        insert SRRBHHyd;    
        SRR__c SRRSJP = new SRR__c();
        SRRSJP.Name = 'SJPBLR';
        SRRSJP.index__c = 0;
        insert SRRSJP; 
        
        SRR__c SRRKHM = new SRR__c();
        SRRKHM.Name ='KHMUM';
        SRRKHM.index__c = 0;
        insert SRRKHM; 
        
        TriggerControl__c cuset1 = new TriggerControl__c();
        cuset1.Name = 'LeadTrigger';
        cuset1.Run__c = true;
        insert cuset1; 
        List<UserLeadColumnData> userlist  = new List<UserLeadColumnData>();
        UserLeadColumnData cd = new UserLeadColumnData();
        cd.column_id = 'test';
        cd.column_name = 'User Phone';
        cd.string_value = 'test';
        userlist.add(cd);
        UserLeadColumnData cd1 = new UserLeadColumnData();
        cd1.column_id = 'test';
        cd1.column_name = 'User Email';
        cd1.string_value = 'test';
        userlist.add(cd1);
        UserLeadColumnData cd2 = new UserLeadColumnData();
        cd2.column_id = 'test';
        cd2.column_name = 'test';
        cd2.string_value = '9081234567';
        userlist.add(cd2);
        UserLeadColumnData cd3 = new UserLeadColumnData();
        cd2.column_id = 'test';
        cd2.column_name = 'Full Name';
        cd2.string_value = 'Test test';
        userlist.add(cd3);
        UserLeadColumnData cd4 = new UserLeadColumnData();
        cd2.column_id = 'test';
        cd2.column_name = 'Last Name';
        cd2.string_value = 'Test';
        userlist.add(cd4);
        UserLeadColumnData cd5 = new UserLeadColumnData();
        cd2.column_id = 'test';
        cd2.column_name = 'Postal Code';
        cd2.string_value = 'Test';
        userlist.add(cd5);
        UserLeadColumnData cd6 = new UserLeadColumnData();
        cd1.column_id = 'test';
        cd1.column_name = 'First Name';
        cd1.string_value = 'Test';
        userlist.add(cd6);
        UserLeadColumnData cd7 = new UserLeadColumnData();
        cd1.column_id = 'test';
        cd1.column_name = 'Last Name';
        cd1.string_value = 'Test';
        userlist.add(cd7);
        UserLeadColumnData cd8 = new UserLeadColumnData();
        cd1.column_id = 'test';
        cd1.column_name = 'Full Name';
        cd1.string_value = 'Test';
        userlist.add(cd8);
        
        JsonLead js = new JsonLead();
        js.lead_id = '1234';
        js.form_id = 'test';
        js.campaign_id = 'test';
        js.adgroup_id = '1234';
        js.gcl_id = 'imtiyaz123';
        js.api_version = '111';
        js.google_key = '1234';
        js.is_test = true;
        js.creative_id = '1234';
        js.mobile = '9800000099';
        
        
        js.user_column_data = userlist;
        
        RestRequest request = new RestRequest();
        request.requestUri ='https://uat-designcafe.cs112.force.com/services/apexrest/googlelead';
        request.httpMethod = 'POST';
        request.addHeader('Content-Type', 'application/json');
        request.requestBody = Blob.valueof(JSON.serialize(js)); 
        JsonLead lead;
        RestContext.request = request;
        RestResponse RestResponse = New RestResponse();
        RestResponse.statusCode = 200;
        RestContext.response = RestResponse;
        Test.startTest();
        GoogleLeadManager.doPost();
        Test.stopTest();
    }
    @isTest
    public static void GoogleLeadManager1(){
        DCWebengage__c  cuset2= new DCWebengage__c();
        cuset2.Name = 'Dcwebengage';
        cuset2.BearerToken__c = '097a1996-03d2-4870-8bbc-339eb9e239b7';
        cuset2.url__c= 'https://api.webengage.com/v1/accounts/aa131ca9/users';
        insert cuset2; 
        
        SRR__c SRRmum = new SRR__c();
        SRRmum.Name = 'Mumbai';
        SRRmum.index__c = 0;
        insert SRRmum;
        SRR__c SRRWDC = new SRR__c();
        SRRWDC.Name = 'WDC';
        SRRWDC.index__c = 0;
        insert SRRWDC;
        SRR__c SRRHyd = new SRR__c();
        SRRHyd.Name = 'Hyderabad';
        SRRHyd.index__c = 0;
        insert SRRHyd;
        SRR__c SRRMGDC = new SRR__c();
        SRRMGDC.Name = 'MGDC';
        SRRMGDC.index__c = 0;
        insert SRRMGDC;
        SRR__c SRRHSR = new SRR__c();
        SRRHSR.Name = 'HSR';
        SRRHSR.index__c = 0;
        insert SRRHSR;
        SRR__c SRRCHE = new SRR__c();
        SRRCHE.Name = 'Chennai';
        SRRCHE.index__c = 0;
        insert SRRCHE;
        SRR__c SRRjpdc = new SRR__c();
        SRRjpdc.Name = 'JPDC';
        SRRjpdc.index__c = 0;
        insert SRRjpdc;
        SRR__c SRRthane = new SRR__c();
        SRRthane.Name = 'Thane DC';
        SRRthane.index__c = 0;
        insert SRRthane; 
        
        SRR__c SRRMysore = new SRR__c();
        SRRMysore.Name = 'KDRMYS';
        SRRMysore.index__c = 0;
        insert SRRMysore;    
        SRR__c SRRPune = new SRR__c();
        SRRPune.Name = 'YERPUN';
        SRRPune.index__c = 0;
		insert SRRPune;
        SRR__c SRRBHHyd = new SRR__c();
        SRRBHHyd.Name = 'BHHYD';
        SRRBHHyd.index__c = 0;
        insert SRRBHHyd;    
        SRR__c SRRSJP = new SRR__c();
        SRRSJP.Name = 'SJPBLR';
        SRRSJP.index__c = 0;
        insert SRRSJP; 
        
        SRR__c SRRKHM = new SRR__c();
        SRRKHM.Name ='KHMUM';
        SRRKHM.index__c = 0;
        insert SRRKHM;
        
        TriggerControl__c cuset1 = new TriggerControl__c();
        cuset1.Name = 'LeadTrigger';
        cuset1.Run__c = true;
        insert cuset1; 
        List<UserLeadColumnData> userlist  = new List<UserLeadColumnData>();
        UserLeadColumnData cd = new UserLeadColumnData();
        cd.column_id = 'test';
        cd.column_name = 'test';
        cd.string_value = 'test';
        userlist.add(cd);
        UserLeadColumnData cd1 = new UserLeadColumnData();
        cd1.column_id = 'test';
        cd1.column_name = 'test';
        cd1.string_value = 'test';
        userlist.add(cd1);
        UserLeadColumnData cd2 = new UserLeadColumnData();
        cd2.column_id = 'test';
        cd2.column_name = 'test';
        cd2.string_value = '9081234567';
        userlist.add(cd2);
        
        JsonLead js = new JsonLead();
        js.lead_id = '1234';
        js.form_id = 'test';
        js.campaign_id = 'test';
        js.gcl_id = 'imtiyaz123';
        js.adgroup_id = '1234';
        js.api_version = '111';
        js.google_key = '1235';
        js.is_test = true;
        js.creative_id = '1234';
        js.mobile = '9800000099';
        
        
        js.user_column_data = userlist;
        
        RestRequest request = new RestRequest();
        request.requestUri ='https://uat-designcafe.cs112.force.com/services/apexrest/googlelead';
        request.httpMethod = 'POST';
        request.addHeader('Content-Type', 'application/json');
        request.requestBody = Blob.valueof(JSON.serialize(js)); 
        JsonLead lead;
        RestContext.request = request;
        RestResponse RestResponse = New RestResponse();
        RestResponse.statusCode = 200;
        RestContext.response = RestResponse;
        Test.startTest();
        GoogleLeadManager.doPost();
        Test.stopTest();
    }
     @isTest
    public static void GoogleLeadManager2(){
        DCWebengage__c  cuset2= new DCWebengage__c();
        cuset2.Name = 'Dcwebengage';
        cuset2.BearerToken__c = '097a1996-03d2-4870-8bbc-339eb9e239b7';
        cuset2.url__c= 'https://api.webengage.com/v1/accounts/aa131ca9/users';
        insert cuset2; 
        
        SRR__c SRRmum = new SRR__c();
        SRRmum.Name = 'Mumbai';
        SRRmum.index__c = 0;
        insert SRRmum;
        SRR__c SRRWDC = new SRR__c();
        SRRWDC.Name = 'WDC';
        SRRWDC.index__c = 0;
        insert SRRWDC;
        SRR__c SRRHyd = new SRR__c();
        SRRHyd.Name = 'Hyderabad';
        SRRHyd.index__c = 0;
        insert SRRHyd;
        SRR__c SRRMGDC = new SRR__c();
        SRRMGDC.Name = 'MGDC';
        SRRMGDC.index__c = 0;
        insert SRRMGDC;
        SRR__c SRRHSR = new SRR__c();
        SRRHSR.Name = 'HSR';
        SRRHSR.index__c = 0;
        insert SRRHSR;
        SRR__c SRRCHE = new SRR__c();
        SRRCHE.Name = 'Chennai';
        SRRCHE.index__c = 0;
        insert SRRCHE;
        SRR__c SRRjpdc = new SRR__c();
        SRRjpdc.Name = 'JPDC';
        SRRjpdc.index__c = 0;
        insert SRRjpdc;
        SRR__c SRRthane = new SRR__c();
        SRRthane.Name = 'Thane DC';
        SRRthane.index__c = 0;
        insert SRRthane; 
        
        SRR__c SRRMysore = new SRR__c();
        SRRMysore.Name = 'KDRMYS';
        SRRMysore.index__c = 0;
        insert SRRMysore;    
        SRR__c SRRPune = new SRR__c();
        SRRPune.Name = 'YERPUN';
        SRRPune.index__c = 0;
		insert SRRPune;
        SRR__c SRRBHHyd = new SRR__c();
        SRRBHHyd.Name = 'BHHYD';
        SRRBHHyd.index__c = 0;
        insert SRRBHHyd;    
        SRR__c SRRSJP = new SRR__c();
        SRRSJP.Name = 'SJPBLR';
        SRRSJP.index__c = 0;
        insert SRRSJP; 
        
        SRR__c SRRKHM = new SRR__c();
        SRRKHM.Name ='KHMUM';
        SRRKHM.index__c = 0;
        insert SRRKHM;
        
        TriggerControl__c cuset1 = new TriggerControl__c();
        cuset1.Name = 'LeadTrigger';
        cuset1.Run__c = true;
        insert cuset1; 
        Lead new_lead = new Lead();
        new_lead.google_lead_id__c = '1234';
        new_lead.google_campaign_id__c = '1236';
        new_lead.MobilePhone = '9081234567';
        new_lead.Email = 'abc@test.com';
        new_lead.FirstName = 'test';
        new_lead.LastName = 'test';
        new_lead.PostalCode = '560037';
        new_lead.google_form_id__c ='1234wqeer';
        new_lead.Approx_Budget__c = '2L to 3L';
        new_lead.City = 'Hyderabad';
        new_lead.Home_Type__c ='1 BHK';
        insert new_lead;
        system.assert(new_lead.id != null ) ;
        
        List<UserLeadColumnData> userlist  = new List<UserLeadColumnData>();
        UserLeadColumnData cd = new UserLeadColumnData();
        cd.column_id = 'test';
        cd.column_name = 'test';
        cd.string_value = 'test';
        userlist.add(cd);
        UserLeadColumnData cd1 = new UserLeadColumnData();
        cd1.column_id = 'test';
        cd1.column_name = 'test';
        cd1.string_value = 'test';
        userlist.add(cd1);
        UserLeadColumnData cd2 = new UserLeadColumnData();
        cd2.column_id = 'test';
        cd2.column_name = 'test';
        cd2.string_value = '9081234567';
        userlist.add(cd2);
        
        JsonLead js = new JsonLead();
        js.lead_id = '1234';
        js.form_id = 'test';
        js.campaign_id = 'test';
        js.gcl_id = 'imtiyaz123';
        js.adgroup_id = '1234';
        js.api_version = '111';
        js.google_key = '1234';
        js.is_test = true;
        js.creative_id = '1234';
        js.mobile = '9800000099';
        
        
        js.user_column_data = userlist;
        
        RestRequest request = new RestRequest();
        request.requestUri ='https://uat-designcafe.cs112.force.com/services/apexrest/googlelead';
        request.httpMethod = 'POST';
        request.addHeader('Content-Type', 'application/json');
        request.requestBody = Blob.valueof(JSON.serialize(js)); 
        JsonLead lead;
        RestContext.request = request;
        RestResponse RestResponse = New RestResponse();
        RestResponse.statusCode = 200;
        RestContext.response = RestResponse;
        Test.setMock(HttpCalloutMock.class, new CCMockUp());
        Test.startTest();
        GoogleLeadManager.doPost();
        Test.stopTest();
    }
}